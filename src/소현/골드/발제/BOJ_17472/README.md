# 17472 다리 만들기 2

```
섬으로 이루어진 나라가 있고, 모든 섬을 다리로 연결하려고 한다. 이 나라의 지도는 N×M 크기의 이차원 격자로 나타낼 수 있고, 격자의 각 칸은 땅이거나 바다이다. 수는 0 또는 1이다.

섬은 연결된 땅이 상하좌우로 붙어있는 덩어리를 말하고, 0은 바다, 1은 땅을 의미한다.

다리는 바다에만 건설할 수 있고, 다리의 길이는 다리가 격자에서 차지하는 칸의 수이다. 다리를 연결해서 모든 섬을 연결하려고 한다. 섬 A에서 다리를 통해 섬 B로 갈 수 있을 때, 섬 A와 B를 연결되었다고 한다. 다리의 양 끝은 섬과 인접한 바다 위에 있어야 하고, 한 다리의 방향이 중간에 바뀌면 안된다. 또, 다리의 길이는 2 이상이어야 한다.

다리의 방향이 중간에 바뀌면 안되기 때문에, 다리의 방향은 가로 또는 세로가 될 수 밖에 없다. 방향이 가로인 다리는 다리의 양 끝이 가로 방향으로 섬과 인접해야 하고, 방향이 세로인 다리는 다리의 양 끝이 세로 방향으로 섬과 인접해야 한다.

섬 A와 B를 연결하는 다리가 중간에 섬 C와 인접한 바다를 지나가는 경우에 섬 C는 A, B와 연결되어있는 것이 아니다.

나라의 정보가 주어졌을 때, 모든 섬을 연결하는 다리 길이의 최솟값을 구해보자. 모든 섬을 연결하는 것이 불가능하면 -1을 출력
```

- 분류
  - 그래프 탐색
  - 브루트포스 알고리즘
  - 너비 우선 탐색
  - 깊이 우선 탐색
  - 최소 신장 트리(MST)
- 시간 제한 1초
- 메모리 제한 512 MB

## Spanning Tree

- 모든 정점들이 연결 되어 있어야 하고 사이클을 포함해서는 안됨
- N개의 정점을 N-1개의 간선으로 연결
- MST: Spanning Tree 중에서 사용된 간선들의 가중치 합이 최소인 트리

### 크루스칼 알고리즘

그래프에서 최소 비용 신장 부분 트리(최소 신장 트리 : Minimum Spanning Tree(MST))를 찾는 알고리즘

- 그리디한 선택을 바탕으로 알고리즘을 진행
  - 간선의 연결비용을 낮은 순으로 오름 차순 정렬
  - 정렬된 간선 순서대로 선택하면서, 간선의 양 끝 정점을 Union
    - 이때 선택된 두 정점이 같은 집합에 속해있다면 사이클(cycle)이 있다고 판단하고 포함시키지 않음
- 크루스칼 시간 복잡도: 간선의 개수 E일 때, O(ElogE)
- 간선의 수가 많은 밀집 그래프에서는 다른 알고리즘에 비해 느리게 동작

#### 문제 설계

1. 브루트포스로 모든 맵을 탐색하면서 `map[i][j] = 1`(땅)인 곳을 찾으면 BFS탐색으로 인접한 땅들을 모두 색칠(각 섬마다 index 다르게 설정)
2. 정점마다 상하좌우 확인하여 길이 2 이상인 최소 다리 길이 탐색

- BFS로 섬 간의 거리를 찾아 모두 리스트에 넣음

3. 모든 정점을 포함하는 최소 신장 트리(크루스칼 사용)를 구하기

- 섬 간 길이 담은 리스트를 길이 순으로 정렬 후 union 진행하며 그룹화
  - 그룹지어지지 않은 두 정점 연결 시 parent 값 변경 시켜줌

#### 풀이

[크루스칼 풀이](./Solution1.java)

- 메모리: 17880kb
- 시간: 176ms

### 프림 알고리즘

- 시작 정점에서부터 출발하여 신장트리 집합을 단계적으로 확장
  - 연결된 정점 중 낮은 비용의 간선 선택, 이미 추가되어있는 정점일 경우 추가 안함
- 시간복잡도: O(n^2)

#### 문제 설계

1. 브루트포스로 모든 맵을 탐색하면서 `map[i][j] = 1`(땅)인 곳을 찾으면 BFS탐색으로 인접한 땅들을 모두 색칠(각 섬마다 index 다르게 설정)
2. 정점마다 상하좌우 확인하여 길이 2 이상인 최소 다리 길이 탐색

- BFS로 섬 간의 거리를 찾아 모두 리스트에 넣음

3. 모든 정점을 포함하는 최소 신장 트리(프림 사용)를 구하기

- 한 정점 선택 후 해당 정점에 이어진 간선 중 낮은 비용 간선 및 정점 선택
- 선택된 정점들 중 낮은 비용 간선 선택 및 정점 이미 포함되어있는지 확인

#### 풀이

[프림 풀이](./Solution2.java)

- 메모리: 17892kb
- 시간: 184ms
